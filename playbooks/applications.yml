# SPDX-License-Identifier: Apache-2.0
# Copyright (c) 2019-2021 Intel Corporation

---

# Playbook for post Network Edge deployment
- hosts: controller_group
  any_errors_fatal: true

  pre_tasks:
    - name: update controller repo path
      set_fact:
        _git_repo_dest: "{{ openness_dir }}/edgenode/edgecontroller"

  roles:
    - role: kafka
      when: eaa_enable | default(True)

    - role: openness/controlplane

    - role: istio
      when: ne_istio_enable | default(False)

    - role: video_analytics_services
      when: video_analytics_services_enable | default(False)


- hosts: edgenode_group
  any_errors_fatal: true
  roles:
    - role: openness/node
