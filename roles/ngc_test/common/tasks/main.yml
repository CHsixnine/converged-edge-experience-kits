# SPDX-License-Identifier: Apache-2.0
# Copyright Â© 2019-2020 Intel Corporation

---

- name: create temporary custom .openness_gitconfig
  include_tasks: ../../../git_repo/tasks/gitconfig_bootstrap.yml

- block:
  - name: checkout clean epcforedge repository
    git:
      repo: "{{ _epcforedge_git_repo.dir }}"
      dest: "{{ _epcforedge_git_repo.download_dir }}"
      version: "{{ _epcforedge_git_repo.branch }}"
      force: yes
    register: result
    retries: "{{ number_of_retries }}"
    until: result is succeeded
    delay: "{{ retry_delay }}"
  always:
  - name: remove .openness_gitconfig
    include_tasks: ../../../git_repo/tasks/gitconfig_remove.yml
  when: not (_offline_mode | d(False))

- name: create directory for ngc configs
  file:
    name: "{{ _configs_dest }}/ngc"
    state: directory
