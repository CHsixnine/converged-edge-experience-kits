# SPDX-License-Identifier: Apache-2.0
# Copyright Â© 2019 Intel Corporation

---

- name: make sure /etc/openness, /etc/openness/certs and /etc/openness/configs exist
  file:
    path: "{{ item }}"
    state: directory
  with_items:
  - /etc/openness
  - "{{ certs_dest }}"
  - "{{ configs_dest }}"
  
- name: checkout clean epcforedge repository
  git:
    repo: "{{ epcforedge_git_repo.dir }}"
    dest: "{{ epcforedge_git_repo.download_dir }}"
    version: "{{ epcforedge_git_repo.branch }}"
    force: yes

- name: make sure repository exists
  git:                                                                                                                                
    repo: "{{ epcforedge_git_repo.dir }}"    
    dest: "{{ epcforedge_git_repo.download_dir }}"
    version: "{{ epcforedge_git_repo.branch }}"                                                                                       
    force: yes                                                                                          
    update: no

- name: create directory for certs used by AF and NEF
  file:
    name: "{{ certs_dest }}/ngc"
    state: directory

- name: create directory for ngc configs
  file:
    name: "{{ configs_dest }}/ngc"
    state: directory

