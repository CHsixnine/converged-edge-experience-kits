# SPDX-License-Identifier: Apache-2.0
# Copyright (c)  2020 Intel Corporation

apiVersion: v1
kind: Service
metadata:
  name: "{{ .Values.service.name }}"
  labels:
    service: "{{ .Values.service.name }}"
  namespace: "{{ .Values.namespace }}"
spec:
  type: "{{ .Values.service.type }}"
  ports:
  - port: 8050
    targetPort: 8050
    nodePort: 30050
#    The below format does not work as helm charts reports expected variable
#    is of type integer but string is passed. Alternatively if we remove
#    the quotes and int. ansible reports a lint warning
#    nodePort: "{{ .Values.service.nodePort | int }}"
    protocol: TCP
    name: cnca
  - port: 8051
    targetPort: 8051
    protocol: TCP
    name: nef
  selector:
    service: "{{ .Values.service.name }}"

