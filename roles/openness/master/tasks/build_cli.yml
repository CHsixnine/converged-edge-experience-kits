---

- name: build and copy InterfaceService CLI
  block:
  - name: build interface service cli
    shell: source /etc/profile && go build -o dist/interfaceservicecli ./cmd/interfaceservicecli
    args:
      chdir: "{{ git_repo_dest }}"
  - name: copy interface service cli
    copy:
      src: "{{ item }}"
      dest: /usr/local/bin
      remote_src: yes
      mode: '0755'
    with_items:
    - "{{ git_repo_dest }}/dist/interfaceservicecli"
    - "{{ git_repo_dest }}/kube-ovn/kubectl-interfaceservice"

- name: build and copy EdgeDNS CLI
  block:
  - name: build EdgeDNS cli
    shell: source /etc/profile && go build -o dist/edgednscli ./cmd/edgednscli
    args:
      chdir: "{{ git_repo_dest }}"
  - name: copy EdgeDNS cli
    copy:
      src: "{{ item }}"
      dest: /usr/local/bin
      remote_src: yes
      mode: '0755'
    with_items:
    - "{{ git_repo_dest }}/dist/edgednscli"
    - "{{ git_repo_dest }}/kube-ovn/kubectl-edgednscli"
